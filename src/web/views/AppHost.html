<script>
    import AppHostViewModel from "~/src/view-models/AppHostViewModel";
    import AppHostStyle from "~/src/web/styles/AppHostStyle";
</script>
<AtomGridView
    default-style="{ AppHostStyle }"
    style-class="{ this.controlStyle.root }"
    view-model="{ this.resolve(AppHostViewModel) }"
    columns="200, *"
    rows="50, *">

    <header row="0" column="0:2" class="header">
        <input type="search" value="^[$viewModel.search]" placeholder="Search..."/>
        <div class="topnav-right">
            <a href="[$viewModel.url]" target="_tab">Open New Tab</a>
            <a href="[$viewModel.inspect($viewModel.url)]">Inspect</a>
            <a event-click="{ () => $viewModel.refreshUrl() }">Refresh</a>
        </div>
        <!-- <button event-click="{ () => $viewModel.refreshUrl() }">Refresh</button>
        <a href="[$viewModel.inspect($viewModel.url)]" target="_tab">Inspect</a> -->
    </header>

    <div
        style="overflow: auto; width: 100%; height: 100%"
        row="1">
        <AtomListBox 
            items="[$viewModel.files]"
            value-path="url"
            value="$[viewModel.url]">
            <div 
                style-display="[$data.visible ? '' : 'none']"
                template="itemTemplate">
                <div text="{$data.name}" title="{$data.dir}" style="font-weight: 500;"></div>
                <div style="font-size: small;" text="{$data.dir}">
                </div>
            </div>
        </AtomListBox>
    </div>

    <iframe
        row="1"
        column="1"
        src="[$viewModel.url]"
        style="border: none; padding:5px; width:100%; height:100%;"></iframe>

</AtomGridView>